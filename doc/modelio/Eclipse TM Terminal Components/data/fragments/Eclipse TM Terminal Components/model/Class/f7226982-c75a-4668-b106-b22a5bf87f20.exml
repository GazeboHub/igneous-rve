<?xml version="1.0" ?>
<!--GENERATED FILE, PLEASE DO NOT EDIT!!!--><EXT object="TerminalTextDataSnapshotTest" version="3">
  <DEPS>
    <ID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
    <COMPID name="SnapshotListener" mc="Class" uid="924cb3b7-535e-447f-a83b-5bddd0a38bc8"/>
    <EXTID name="ITerminalTextData" mc="Interface" uid="ac632690-0372-4dd9-8652-517688ae86b4"/>
    <EXTID name="ITerminalTextDataReadOnly" mc="Interface" uid="5d437a3b-d026-44b8-9ed0-21e2056a7c52"/>
    <EXTID name="ITerminalTextDataSnapshot" mc="Interface" uid="b5768b9b-c546-40ba-be28-aac7a10baa83"/>
    <EXTID name="Style" mc="Class" uid="7cdb99e1-1c04-4057-9dc6-e4097a90d2d1"/>
    <EXTID name="StyleColor" mc="Class" uid="7143f483-46a9-4d92-88dd-ec714edb47ed"/>
    <FOREIGNID name="JavaClass" mc="Stereotype" uid="01ec23a8-0000-0258-0000-000000000000"/>
    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
    <FOREIGNID name="JavaComment" mc="NoteType" uid="69ab88b5-741c-11e1-89e3-002564c97630"/>
    <FOREIGNID name="JavaExtends" mc="TagType" uid="003800a8-0000-0154-0000-000000000000"/>
    <FOREIGNID name="JavaImport" mc="TagType" uid="003800a8-0000-0155-0000-000000000000"/>
    <FOREIGNID name="JavaReturned" mc="NoteType" uid="003800a8-0000-0190-0000-000000000000"/>
    <FOREIGNID name="JavaTypeExpr" mc="TagType" uid="00380080-0000-01a4-0000-000000000000"/>
    <FOREIGNID name="Javadoc" mc="NoteType" uid="003800a8-0000-015f-0000-000000000000"/>
    <FOREIGNID name="Javadoc" mc="NoteType" uid="01240268-0000-0044-0000-000000000000"/>
  </DEPS>
  <OBJECT>
    <ID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
    <PID name="model" mc="Package" uid="9137cf6f-04f3-4c9b-a309-4bf94c2303e2"/>
    <ATTRIBUTES>
      <ATT name="IsActive">false</ATT>
      <ATT name="IsMain">false</ATT>
      <ATT name="IsElementary">false</ATT>
      <ATT name="IsAbstract">false</ATT>
      <ATT name="IsLeaf">false</ATT>
      <ATT name="IsRoot">false</ATT>
      <ATT name="Visibility">Public</ATT>
      <ATT name="Name"><![CDATA[TerminalTextDataSnapshotTest]]></ATT>
      <ATT name="status">1970354901745664</ATT>
    </ATTRIBUTES>
    <DEPENDENCIES>
      <COMP relation="OwnedOperation">
        <OBJECT>
          <ID name="toMultiLineText" mc="Operation" uid="b6bb2bd0-b47e-43da-b68b-6e8a6b9a9821"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">PackageVisibility</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[toMultiLineText]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="IO">
              <OBJECT>
                <ID name="term" mc="Parameter" uid="7f365f1f-46a5-4616-982d-5fe3fc5460a2"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="ParameterPassing">In</ATT>
                  <ATT name="MultiplicityMin"><![CDATA[1]]></ATT>
                  <ATT name="MultiplicityMax"><![CDATA[1]]></ATT>
                  <ATT name="TypeConstraint"></ATT>
                  <ATT name="DefaultValue"></ATT>
                  <ATT name="IsOrdered">false</ATT>
                  <ATT name="IsUnique">false</ATT>
                  <ATT name="IsException">false</ATT>
                  <ATT name="IsStream">false</ATT>
                  <ATT name="Effect">ReadEffect</ATT>
                  <ATT name="Name"><![CDATA[term]]></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Type">
                    <ID name="ITerminalTextDataReadOnly" mc="Interface" uid="5d437a3b-d026-44b8-9ed0-21e2056a7c52"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
            <COMP relation="Return">
              <OBJECT>
                <ID name="" mc="Parameter" uid="c0e7fd4c-c8d5-46e3-a2de-ebd0088edaaa"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="ParameterPassing">In</ATT>
                  <ATT name="MultiplicityMin"><![CDATA[1]]></ATT>
                  <ATT name="MultiplicityMax"><![CDATA[1]]></ATT>
                  <ATT name="TypeConstraint"></ATT>
                  <ATT name="DefaultValue"></ATT>
                  <ATT name="IsOrdered">false</ATT>
                  <ATT name="IsUnique">false</ATT>
                  <ATT name="IsException">false</ATT>
                  <ATT name="IsStream">false</ATT>
                  <ATT name="Effect">ReadEffect</ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <COMP relation="Tag">
                    <OBJECT>
                      <ID name="" mc="TaggedValue" uid="bfcae6d1-6554-48ea-b109-4e0456ea7984"/>
                      <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                      <ATTRIBUTES>
                        <ATT name="Name"></ATT>
                        <ATT name="status">1970354901745664</ATT>
                      </ATTRIBUTES>
                      <DEPENDENCIES>
                        <COMP relation="Actual">
                          <OBJECT>
                            <ID name="" mc="TagParameter" uid="46ab4117-3217-4e78-928d-1e005cc0cd71"/>
                            <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                            <ATTRIBUTES>
                              <ATT name="Value"><![CDATA[String]]></ATT>
                              <ATT name="status">1970354901745664</ATT>
                            </ATTRIBUTES>
                            <DEPENDENCIES></DEPENDENCIES>
                          </OBJECT>
                        </COMP>
                        <LINK relation="Definition">
                          <FOREIGNID name="JavaTypeExpr" mc="TagType" uid="00380080-0000-01a4-0000-000000000000"/>
                        </LINK>
                      </DEPENDENCIES>
                    </OBJECT>
                  </COMP>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="92c5d51f-d5d9-4120-9e7b-ba1ad356c860"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[return TerminalTextTestHelper.toMultiLineText(term);]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaReturned" mc="NoteType" uid="003800a8-0000-0190-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="makeITerminalTextData" mc="Operation" uid="e9888c64-8b5a-40e6-a023-2179c533be91"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Protected</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[makeITerminalTextData]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Return">
              <OBJECT>
                <ID name="" mc="Parameter" uid="7c0dc592-d011-4aab-ad04-5b358cca19b2"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="ParameterPassing">In</ATT>
                  <ATT name="MultiplicityMin"><![CDATA[1]]></ATT>
                  <ATT name="MultiplicityMax"><![CDATA[1]]></ATT>
                  <ATT name="TypeConstraint"></ATT>
                  <ATT name="DefaultValue"></ATT>
                  <ATT name="IsOrdered">false</ATT>
                  <ATT name="IsUnique">false</ATT>
                  <ATT name="IsException">false</ATT>
                  <ATT name="IsStream">false</ATT>
                  <ATT name="Effect">ReadEffect</ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Type">
                    <ID name="ITerminalTextData" mc="Interface" uid="ac632690-0372-4dd9-8652-517688ae86b4"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="e0547c4f-75e5-4b0a-8908-e83116958da5"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[return new TerminalTextData();]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaReturned" mc="NoteType" uid="003800a8-0000-0190-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testTerminalTextDataSnapshot" mc="Operation" uid="b2101e65-60b8-4bec-8b74-00171ea02541"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testTerminalTextDataSnapshot]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="be799e65-f811-40a0-8221-5c381953c853"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
TerminalTextTestHelper.fill(term,s);

ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);

assertEquals(toMultiLineText(term), toMultiLineText(snapshot));

// new snapshots are fully changed
assertEquals(0,snapshot.getFirstChangedLine());
assertEquals(term.getHeight()-1,snapshot.getLastChangedLine());
for (int line = 0; line <= snapshot.getLastChangedLine(); line++) {
    assertTrue(snapshot.hasLineChanged(line));
}
// nothing has scrolled
assertEquals(0, snapshot.getScrollWindowSize());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testDetach" mc="Operation" uid="9d40c892-d91f-4d7b-a07f-df6f4b572811"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testDetach]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="d140bbd9-45b7-4958-b11f-26ec252cf1bb"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
TerminalTextTestHelper.fill(term,s);

ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);

assertEquals(toMultiLineText(term),toMultiLineText(snapshot));
snapshot.detach();
// after detach changes to the term has no effect
term.setChar(0, 0, '?', null);
assertEquals(s, toMultiLineText(snapshot));
term.setDimensions(2, 2);
assertEquals(s, toMultiLineText(snapshot));
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testIsOutOfDate" mc="Operation" uid="15d24799-8dc8-48da-8256-ed0058ed9bb4"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testIsOutOfDate]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="66f04f87-645d-4258-b926-2215bb1d8f44"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
TerminalTextTestHelper.fill(term,s);

ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
assertTrue(snapshot.isOutOfDate());
snapshot.updateSnapshot(false);

assertFalse(snapshot.isOutOfDate());

// make a change and expect it to be changed
term.setChar(0, 0, '?', null);
assertTrue(snapshot.isOutOfDate());

snapshot.updateSnapshot(false);
assertFalse(snapshot.isOutOfDate());

// make a change and expect it to be changed
term.setChars(1, 1, new char[]{'?','!','.'},null);
assertTrue(snapshot.isOutOfDate());

snapshot.updateSnapshot(false);
assertFalse(snapshot.isOutOfDate());

// scroll
term.scroll(1, 2, -1);
assertTrue(snapshot.isOutOfDate());

snapshot.updateSnapshot(false);
assertFalse(snapshot.isOutOfDate());

// scroll
term.scroll(1, 2, 1);
assertTrue(snapshot.isOutOfDate());

snapshot.updateSnapshot(false);
assertFalse(snapshot.isOutOfDate());

// scroll
term.scroll(1, 2, -1);
assertTrue(snapshot.isOutOfDate());

snapshot.updateSnapshot(true);
assertFalse(snapshot.isOutOfDate());

// scroll
term.scroll(1, 2, 1);
assertTrue(snapshot.isOutOfDate());

snapshot.updateSnapshot(true);
assertFalse(snapshot.isOutOfDate());

// setDimensions
term.setDimensions(2, 2);
assertTrue(snapshot.isOutOfDate());

snapshot.updateSnapshot(false);
assertFalse(snapshot.isOutOfDate());

// setDimensions
term.setDimensions(20, 20);
assertTrue(snapshot.isOutOfDate());

snapshot.updateSnapshot(false);
assertFalse(snapshot.isOutOfDate());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="snapshot" mc="Operation" uid="87084dc9-c257-4e8a-8383-1b5fa88863c5"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">PackageVisibility</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[snapshot]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="IO">
              <OBJECT>
                <ID name="text" mc="Parameter" uid="48ab184c-ecd4-4457-9380-48379d5cf34b"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="ParameterPassing">In</ATT>
                  <ATT name="MultiplicityMin"><![CDATA[1]]></ATT>
                  <ATT name="MultiplicityMax"><![CDATA[1]]></ATT>
                  <ATT name="TypeConstraint"></ATT>
                  <ATT name="DefaultValue"></ATT>
                  <ATT name="IsOrdered">false</ATT>
                  <ATT name="IsUnique">false</ATT>
                  <ATT name="IsException">false</ATT>
                  <ATT name="IsStream">false</ATT>
                  <ATT name="Effect">ReadEffect</ATT>
                  <ATT name="Name"><![CDATA[text]]></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <COMP relation="Tag">
                    <OBJECT>
                      <ID name="" mc="TaggedValue" uid="ebef3209-76e3-416f-ae6a-90cf8a248d13"/>
                      <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                      <ATTRIBUTES>
                        <ATT name="Name"></ATT>
                        <ATT name="status">1970354901745664</ATT>
                      </ATTRIBUTES>
                      <DEPENDENCIES>
                        <COMP relation="Actual">
                          <OBJECT>
                            <ID name="" mc="TagParameter" uid="9f542e92-b1e9-49c1-90d9-2cd3944b0c29"/>
                            <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                            <ATTRIBUTES>
                              <ATT name="Value"><![CDATA[String]]></ATT>
                              <ATT name="status">1970354901745664</ATT>
                            </ATTRIBUTES>
                            <DEPENDENCIES></DEPENDENCIES>
                          </OBJECT>
                        </COMP>
                        <LINK relation="Definition">
                          <FOREIGNID name="JavaTypeExpr" mc="TagType" uid="00380080-0000-01a4-0000-000000000000"/>
                        </LINK>
                      </DEPENDENCIES>
                    </OBJECT>
                  </COMP>
                </DEPENDENCIES>
              </OBJECT>
              <OBJECT>
                <ID name="term" mc="Parameter" uid="70b92de1-097b-43e4-a318-dea8da320b8f"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="ParameterPassing">In</ATT>
                  <ATT name="MultiplicityMin"><![CDATA[1]]></ATT>
                  <ATT name="MultiplicityMax"><![CDATA[1]]></ATT>
                  <ATT name="TypeConstraint"></ATT>
                  <ATT name="DefaultValue"></ATT>
                  <ATT name="IsOrdered">false</ATT>
                  <ATT name="IsUnique">false</ATT>
                  <ATT name="IsException">false</ATT>
                  <ATT name="IsStream">false</ATT>
                  <ATT name="Effect">ReadEffect</ATT>
                  <ATT name="Name"><![CDATA[term]]></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Type">
                    <ID name="ITerminalTextData" mc="Interface" uid="ac632690-0372-4dd9-8652-517688ae86b4"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
            <COMP relation="Return">
              <OBJECT>
                <ID name="" mc="Parameter" uid="1b32695e-c754-4268-beea-4ea5b6d1ebdc"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="ParameterPassing">In</ATT>
                  <ATT name="MultiplicityMin"><![CDATA[1]]></ATT>
                  <ATT name="MultiplicityMax"><![CDATA[1]]></ATT>
                  <ATT name="TypeConstraint"></ATT>
                  <ATT name="DefaultValue"></ATT>
                  <ATT name="IsOrdered">false</ATT>
                  <ATT name="IsUnique">false</ATT>
                  <ATT name="IsException">false</ATT>
                  <ATT name="IsStream">false</ATT>
                  <ATT name="Effect">ReadEffect</ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Type">
                    <ID name="ITerminalTextDataSnapshot" mc="Interface" uid="b5768b9b-c546-40ba-be28-aac7a10baa83"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="c960139b-216a-4915-84c2-20869eb11324"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[return snapshot;]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaReturned" mc="NoteType" uid="003800a8-0000-0190-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
              <OBJECT>
                <ID name="" mc="Note" uid="57e02fc2-b3a3-47d4-b25d-341ebe081272"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[TerminalTextTestHelper.fill(term,text);
ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testUpdateSnapshot" mc="Operation" uid="cac60b47-210e-47fc-b4ca-d256a3300c87"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testUpdateSnapshot]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="188e999a-e162-44ab-97c8-d73fc717ca20"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
TerminalTextTestHelper.fill(term,s);
String termString=toMultiLineText(term);
ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);

assertEquals(termString,toMultiLineText(snapshot));

// make changes and assert that the snapshot has not changed
// then update the snapshot and expect it to be the
// same as the changed terminal

// make a change 
term.setChar(0, 0, '?', null);
assertEquals(termString,toMultiLineText(snapshot));

snapshot.updateSnapshot(false);
termString=toMultiLineText(term);
assertEquals(termString,toMultiLineText(snapshot));

// make a change 
term.setChars(1, 1, new char[]{'?','!','.'},null);
assertEquals(termString,toMultiLineText(snapshot));

snapshot.updateSnapshot(false);
termString=toMultiLineText(term);
assertEquals(termString,toMultiLineText(snapshot));

// scroll
term.scroll(1, 2, -1);
assertEquals(termString,toMultiLineText(snapshot));

snapshot.updateSnapshot(false);
termString=toMultiLineText(term);
assertEquals(termString,toMultiLineText(snapshot));

// scroll
term.scroll(1, 2, 1);
assertEquals(termString,toMultiLineText(snapshot));

snapshot.updateSnapshot(false);
termString=toMultiLineText(term);
assertEquals(termString,toMultiLineText(snapshot));

// scroll
term.scroll(1, 2, -1);
assertEquals(termString,toMultiLineText(snapshot));

snapshot.updateSnapshot(true);
termString=toMultiLineText(term);
assertEquals(termString,toMultiLineText(snapshot));

// scroll
term.scroll(1, 2, 1);
assertEquals(termString,toMultiLineText(snapshot));

snapshot.updateSnapshot(true);
termString=toMultiLineText(term);
assertEquals(termString,toMultiLineText(snapshot));

// set dimensions
term.setDimensions(2, 2);
assertEquals(termString,toMultiLineText(snapshot));

snapshot.updateSnapshot(false);
termString=toMultiLineText(term);
assertEquals(termString,toMultiLineText(snapshot));

// set dimensions
term.setDimensions(20, 20);
assertEquals(termString,toMultiLineText(snapshot));

snapshot.updateSnapshot(false);
termString=toMultiLineText(term);
assertEquals(termString,toMultiLineText(snapshot));
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testMaxSize" mc="Operation" uid="57e8f464-ad1e-4d9c-b0f9-3343e56bee74"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testMaxSize]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="4e42cbfe-9af6-4cdf-8d04-8adc9af43b99"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[String s=
    "111\n" +
    "222\n" +
    "333\n" +
    "444\n" +
    "555";
ITerminalTextData term=makeITerminalTextData();
term.setMaxHeight(8);
TerminalTextTestHelper.fill(term, s);
ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);

term.addLine();
assertTrue(snapshot.isOutOfDate());
snapshot.updateSnapshot(false);
assertEquals(toMultiLineText(term), toMultiLineText(snapshot));

term.addLine();
assertTrue(snapshot.isOutOfDate());
snapshot.updateSnapshot(false);
assertEquals(toMultiLineText(term), toMultiLineText(snapshot));

term.addLine();
assertTrue(snapshot.isOutOfDate());
snapshot.updateSnapshot(false);
assertEquals(toMultiLineText(term), toMultiLineText(snapshot));

term.addLine();
assertTrue(snapshot.isOutOfDate());
snapshot.updateSnapshot(false);
assertEquals(toMultiLineText(term), toMultiLineText(snapshot));

term.addLine();
assertTrue(snapshot.isOutOfDate());
snapshot.updateSnapshot(false);
assertEquals(toMultiLineText(term), toMultiLineText(snapshot));
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testGetChar" mc="Operation" uid="9e9a8d98-878d-4eb2-9504-5ea1021f364b"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testGetChar]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="ea4e2d78-67de-49cf-a462-2c250fb01a0a"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
TerminalTextTestHelper.fill(term,s);
ITerminalTextData termUnchanged=makeITerminalTextData();
TerminalTextTestHelper.fill(termUnchanged,s);

ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);

for (int line = 0; line < snapshot.getHeight(); line++) {
    for (int column = 0; column < snapshot.getWidth(); column++) {
        assertEquals(term.getChar(line, column),snapshot.getChar(line, column));
    }
}
// make a change 
term.setChar(0, 0, '?', null);
// check against unchanged data
for (int line = 0; line < snapshot.getHeight(); line++) {
    for (int column = 0; column < snapshot.getWidth(); column++) {
        assertEquals(termUnchanged.getChar(line, column),snapshot.getChar(line, column));
    }
}
// update and compare against the terminal
snapshot.updateSnapshot(true);
for (int line = 0; line < snapshot.getHeight(); line++) {
    for (int column = 0; column < snapshot.getWidth(); column++) {
        assertEquals(term.getChar(line, column),snapshot.getChar(line, column));
    }
}
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testGetHeight" mc="Operation" uid="f21a5ec4-9a75-4ad5-add8-0fc19bb22bb7"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testGetHeight]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="3b9eebd5-b966-4e22-8b80-11ae5cb34d40"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
TerminalTextTestHelper.fill(term,s);

ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);

int expectedHeight=term.getHeight();
assertEquals(expectedHeight, snapshot.getHeight());
term.setDimensions(term.getHeight()-1, term.getWidth());
assertEquals(expectedHeight, snapshot.getHeight());

//
snapshot.updateSnapshot(false);
expectedHeight=term.getHeight();
assertEquals(expectedHeight, snapshot.getHeight());
term.setDimensions(term.getHeight()-1, term.getWidth());
assertEquals(expectedHeight, snapshot.getHeight());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testGetStyle" mc="Operation" uid="9b31c7b7-ed11-4cc8-9b6f-6d961abb40c0"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testGetStyle]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="0751cbee-158d-4ae8-80db-71872060ef37"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[//
//    public void testGetLineSegments() {
//        fail("Not yet implemented");
//    }
//]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaComment" mc="NoteType" uid="69ab88b5-741c-11e1-89e3-002564c97630"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
              <OBJECT>
                <ID name="" mc="Note" uid="95fbb676-74ef-4b0c-9bb4-2ba674250ee3"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
Style style=Style.getStyle(StyleColor.getStyleColor("fg"), StyleColor.getStyleColor("bg"), false, false, false, false);
term.setDimensions(6, 3);
for (int line = 0; line < term.getHeight(); line++) {
    for (int column = 0; column < term.getWidth(); column++) {
        char c=(char)('a'+column+line);
        term.setChar(line, column, c, style.setForground(StyleColor.getStyleColor(""+c)));
    }
}
ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);


for (int line = 0; line < term.getHeight(); line++) {
    for (int column = 0; column < term.getWidth(); column++) {
        char c=(char)('a'+column+line);
        assertSame(style.setForground(StyleColor.getStyleColor(""+c)), snapshot.getStyle(line, column));
    }
}
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testGetWidth" mc="Operation" uid="96ec1b51-6fe4-469c-878b-4d98fb87aefd"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testGetWidth]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="e4a5ac20-228d-46cf-a5aa-620455204142"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
TerminalTextTestHelper.fill(term,s);

ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);

int expectedWidth=term.getWidth();
assertEquals(expectedWidth, snapshot.getWidth());
term.setDimensions(term.getHeight(), term.getWidth()-1);
assertEquals(expectedWidth, snapshot.getWidth());

//
snapshot.updateSnapshot(false);
expectedWidth=term.getWidth();
assertEquals(expectedWidth, snapshot.getWidth());
term.setDimensions(term.getHeight(), term.getWidth()-1);
assertEquals(expectedWidth, snapshot.getWidth());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testGetFirstChangedLine" mc="Operation" uid="c5427a6d-7cc1-4cda-b50a-34cda0e8511a"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testGetFirstChangedLine]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="a8813fc8-aaf2-4ad6-9921-9d033982c414"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
ITerminalTextDataSnapshot snapshot=snapshot(s,term);


assertEquals(0, snapshot.getFirstChangedLine());

// if nothing has changed the first changed line i height
snapshot.updateSnapshot(false);
assertEquals(Integer.MAX_VALUE, snapshot.getFirstChangedLine());

snapshot=snapshot(s,term);
term.setChar(0, 0, 'x', null);
snapshot.updateSnapshot(false);
assertEquals(0, snapshot.getFirstChangedLine());

snapshot=snapshot(s,term);        
term.setChar(3, 0, 'x', null);
term.setChar(4, 0, 'x', null);
snapshot.updateSnapshot(false);
assertEquals(3, snapshot.getFirstChangedLine());

snapshot=snapshot(s,term);
term.scroll(0, 1, -1);
snapshot.updateSnapshot(false);
assertEquals(0, snapshot.getFirstChangedLine());

snapshot=snapshot(s,term);
term.scroll(2, 2, -1);
snapshot.updateSnapshot(false);
assertEquals(2, snapshot.getFirstChangedLine());

// when scrolling the end of the region 'has changed'
snapshot=snapshot(s,term);
term.scroll(2, 2, -1);
snapshot.updateSnapshot(true);
assertEquals(3, snapshot.getFirstChangedLine());

// when scrolling the end of the region 'has changed'
snapshot=snapshot(s,term);
term.scroll(2, 2, -1);
term.setChar(1, 0, 'x', null);
snapshot.updateSnapshot(true);
assertEquals(1, snapshot.getFirstChangedLine());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testGetLastChangedLine" mc="Operation" uid="3d134bcd-00f0-4ec5-8227-4e5565a8dcf1"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testGetLastChangedLine]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="6f36bec9-791b-4a04-b8f4-2913d793a29e"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
ITerminalTextDataSnapshot snapshot=snapshot(s,term);


assertEquals(4, snapshot.getLastChangedLine());

// if nothing has changed the first changed line i height
snapshot.updateSnapshot(false);
assertEquals(-1, snapshot.getLastChangedLine());

snapshot=snapshot(s,term);
term.setChar(0, 0, 'x', null);
snapshot.updateSnapshot(false);
assertEquals(0, snapshot.getLastChangedLine());

snapshot=snapshot(s,term);
term.cleanLine(1);
snapshot.updateSnapshot(false);
assertEquals(1, snapshot.getLastChangedLine());

snapshot=snapshot(s,term);        
term.setChar(3, 0, 'x', null);
term.setChar(4, 0, 'x', null);
snapshot.updateSnapshot(false);
assertEquals(4, snapshot.getLastChangedLine());

snapshot=snapshot(s,term);
term.scroll(0, 1, -1);
snapshot.updateSnapshot(false);
assertEquals(0, snapshot.getLastChangedLine());

snapshot=snapshot(s,term);
term.scroll(2, 2, -1);
snapshot.updateSnapshot(false);
assertEquals(3, snapshot.getLastChangedLine());

// when scrolling the end of the region 'has changed'
snapshot=snapshot(s,term);
term.scroll(2, 2, -1);
snapshot.updateSnapshot(true);
assertEquals(3, snapshot.getLastChangedLine());

// when scrolling the end of the region 'has changed'
snapshot=snapshot(s,term);
term.scroll(2, 2, -1);
term.setChar(1, 0, 'x', null);
snapshot.updateSnapshot(true);
assertEquals(3, snapshot.getLastChangedLine());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="assertChangedLines" mc="Operation" uid="d899b3a6-f8b1-4c0e-afef-fe38ea1cebd4"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">PackageVisibility</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[assertChangedLines]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="IO">
              <OBJECT>
                <ID name="snapshot" mc="Parameter" uid="94c1111b-80fb-472b-aec4-a0f50d250771"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="ParameterPassing">In</ATT>
                  <ATT name="MultiplicityMin"><![CDATA[1]]></ATT>
                  <ATT name="MultiplicityMax"><![CDATA[1]]></ATT>
                  <ATT name="TypeConstraint"></ATT>
                  <ATT name="DefaultValue"></ATT>
                  <ATT name="IsOrdered">false</ATT>
                  <ATT name="IsUnique">false</ATT>
                  <ATT name="IsException">false</ATT>
                  <ATT name="IsStream">false</ATT>
                  <ATT name="Effect">ReadEffect</ATT>
                  <ATT name="Name"><![CDATA[snapshot]]></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Type">
                    <ID name="ITerminalTextDataSnapshot" mc="Interface" uid="b5768b9b-c546-40ba-be28-aac7a10baa83"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
              <OBJECT>
                <ID name="expected" mc="Parameter" uid="dfeba461-8b94-4283-ba9b-2a9708ebe3cc"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="ParameterPassing">In</ATT>
                  <ATT name="MultiplicityMin"><![CDATA[1]]></ATT>
                  <ATT name="MultiplicityMax"><![CDATA[1]]></ATT>
                  <ATT name="TypeConstraint"></ATT>
                  <ATT name="DefaultValue"></ATT>
                  <ATT name="IsOrdered">false</ATT>
                  <ATT name="IsUnique">false</ATT>
                  <ATT name="IsException">false</ATT>
                  <ATT name="IsStream">false</ATT>
                  <ATT name="Effect">ReadEffect</ATT>
                  <ATT name="Name"><![CDATA[expected]]></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <COMP relation="Tag">
                    <OBJECT>
                      <ID name="" mc="TaggedValue" uid="db01f3ec-45cd-4928-b215-b04d6ad7ac40"/>
                      <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                      <ATTRIBUTES>
                        <ATT name="Name"></ATT>
                        <ATT name="status">1970354901745664</ATT>
                      </ATTRIBUTES>
                      <DEPENDENCIES>
                        <COMP relation="Actual">
                          <OBJECT>
                            <ID name="" mc="TagParameter" uid="d82dfdaf-42b4-4428-a1b5-2ab4f9d23843"/>
                            <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                            <ATTRIBUTES>
                              <ATT name="Value"><![CDATA[String]]></ATT>
                              <ATT name="status">1970354901745664</ATT>
                            </ATTRIBUTES>
                            <DEPENDENCIES></DEPENDENCIES>
                          </OBJECT>
                        </COMP>
                        <LINK relation="Definition">
                          <FOREIGNID name="JavaTypeExpr" mc="TagType" uid="00380080-0000-01a4-0000-000000000000"/>
                        </LINK>
                      </DEPENDENCIES>
                    </OBJECT>
                  </COMP>
                  <COMP relation="Descriptor">
                    <OBJECT>
                      <ID name="" mc="Note" uid="c1716464-b032-4aaa-bf63-3ea8ecb7d22a"/>
                      <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                      <ATTRIBUTES>
                        <ATT name="Content"><![CDATA[a string of 0 and 1 (1 means changed)]]></ATT>
                        <ATT name="Name"></ATT>
                        <ATT name="status">1970354901745664</ATT>
                      </ATTRIBUTES>
                      <DEPENDENCIES>
                        <LINK relation="Model">
                          <FOREIGNID name="Javadoc" mc="NoteType" uid="01240268-0000-0044-0000-000000000000"/>
                        </LINK>
                      </DEPENDENCIES>
                    </OBJECT>
                  </COMP>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="fcce4e76-acd3-4964-86e6-01e1b7b44e31"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[@param snapshot]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="Javadoc" mc="NoteType" uid="003800a8-0000-015f-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
              <OBJECT>
                <ID name="" mc="Note" uid="f7b5062d-2370-439c-bc58-fec39d391e1f"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[assertEquals(expected.length(),snapshot.getHeight());
StringBuffer buffer=new StringBuffer();
for (int line = 0; line < expected.length(); line++) {
    if(snapshot.hasLineChanged(line))
        buffer.append('1');
    else
        buffer.append('0');
}
assertEquals(expected, buffer.toString());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testHasLineChangedScroll" mc="Operation" uid="d021900c-d302-46e9-80ba-ee38ead463d5"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testHasLineChangedScroll]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="28a87433-6dff-46be-a3d7-f7cf8d83a552"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="00\n" +
         "11\n" +
         "22\n" +
         "33\n" +
         "44\n" +
         "55\n" +
         "66\n" +
         "77\n" +
         "88\n" +
         "99";
ITerminalTextDataSnapshot snapshot=snapshot(s,term);

term.scroll(2,3,-1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "0000100000");

snapshot=snapshot(s,term);
term.scroll(2,3,-2);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "0001100000");

snapshot=snapshot(s,term);
term.scroll(2,4,-1);
term.scroll(2,4,-1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "0000110000");

term.scroll(2,3,1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "0011100000");

snapshot=snapshot(s,term);
term.scroll(2,3,2);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "0011100000");

snapshot=snapshot(s,term);
term.scroll(2,4,1);
term.scroll(2,4,1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "0011110000");


snapshot=snapshot(s,term);
term.scroll(2,3,-1);
snapshot.updateSnapshot(false);
assertChangedLines(snapshot, "0011100000");

snapshot=snapshot(s,term);
term.scroll(2,3,-2);
snapshot.updateSnapshot(false);
assertChangedLines(snapshot, "0011100000");

snapshot=snapshot(s,term);
term.scroll(2,4,-1);
term.scroll(2,4,-1);
snapshot.updateSnapshot(false);
assertChangedLines(snapshot, "0011110000");
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testMultiScrollWithDifferentSizes" mc="Operation" uid="6303f8ef-883e-47b6-9700-58880bd2b15d"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testMultiScrollWithDifferentSizes]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="5d1c152a-1a84-45d4-a17b-80843b1bcd96"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="00\n" +
         "11\n" +
         "22\n" +
         "33\n" +
         "44\n" +
         "55\n" +
         "66\n" +
         "77\n" +
         "88\n" +
         "99";
ITerminalTextDataSnapshot snapshot;

snapshot=snapshot(s,term);
term.scroll(2,6,-1);
term.scroll(2,5,-1);
snapshot.updateSnapshot(false);
assertChangedLines(snapshot, "0011111100");
assertEquals(2, snapshot.getFirstChangedLine());
assertEquals(7, snapshot.getLastChangedLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowShift());

// scrolls with different ranges cause no scroll
// optimization
snapshot=snapshot(s,term);
term.scroll(2,6,-1);
term.scroll(2,5,-1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "0011111100");
assertEquals(2, snapshot.getFirstChangedLine());
assertEquals(7, snapshot.getLastChangedLine());
assertEquals(0, snapshot.getScrollWindowShift());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowStartLine());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testHasLineChanged" mc="Operation" uid="60a01b97-0eec-471e-8e76-02f60b181e13"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testHasLineChanged]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="31075f94-86a1-4432-94e5-d8dcbd62652d"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="000000\n" +
        "111111\n" +
        "222222\n" +
        "333333\n" +
        "444444\n" +
        "555555\n" +
        "666666\n" +
        "777777\n" +
        "888888\n" +
        "999999";
ITerminalTextDataSnapshot snapshot;

snapshot=snapshot(s,term);
term.scroll(2,3,-1);
term.setChar(7, 0, '.', null);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "0000100100");

snapshot=snapshot(s,term);
term.scroll(2,3,-2);
term.setChar(9, 0, '.', null);
term.setChars(0, 0, new char[]{'.','!'}, null);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "1001100001");

snapshot=snapshot(s,term);
term.scroll(2,4,-1);
term.scroll(2,4,-1);
term.setChars(2, 2, new char[]{'.','!','*'},1,1, null);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "0010110000");

snapshot=snapshot(s,term);
term.scroll(2,7,-1);
term.setChar(5, 2, '.', null);
term.scroll(2,7,-2);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "0001001110");


snapshot=snapshot(s,term);
term.scroll(2,7,-1);
term.setChar(5, 2, '.', null);
term.scroll(2,7,-2);
snapshot.updateSnapshot(false);
assertChangedLines(snapshot, "0011111110");
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testScroll" mc="Operation" uid="61b8db1e-1f41-4deb-9957-fb1cb6df727d"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testScroll]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="1ff3c534-4577-4976-b0ee-d18deb60414f"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="00\n" +
         "11\n" +
         "22\n" +
         "33\n" +
         "44\n" +
         "55\n" +
         "66\n" +
         "77\n" +
         "88\n" +
         "99";
ITerminalTextDataSnapshot snapshot=snapshot(s,term);

term.scroll(2,3,-1);
snapshot.updateSnapshot(true);
assertEquals(2, snapshot.getScrollWindowStartLine());
assertEquals(3, snapshot.getScrollWindowSize());
assertEquals(-1, snapshot.getScrollWindowShift());
assertEquals(4, snapshot.getFirstChangedLine());
assertEquals(4, snapshot.getLastChangedLine());

term.scroll(2,3,-2);
snapshot.updateSnapshot(true);
assertEquals(2, snapshot.getScrollWindowStartLine());
assertEquals(3, snapshot.getScrollWindowSize());
assertEquals(-2, snapshot.getScrollWindowShift());
assertEquals(3, snapshot.getFirstChangedLine());
assertEquals(4, snapshot.getLastChangedLine());

term.scroll(2,4,-1);
term.scroll(2,4,-1);
snapshot.updateSnapshot(true);
assertEquals(2, snapshot.getScrollWindowStartLine());
assertEquals(4, snapshot.getScrollWindowSize());
assertEquals(-2, snapshot.getScrollWindowShift());
assertEquals(4, snapshot.getFirstChangedLine());
assertEquals(5, snapshot.getLastChangedLine());


snapshot=snapshot(s,term);
term.scroll(2,3,-1);
snapshot.updateSnapshot(false);
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());
assertEquals(2, snapshot.getFirstChangedLine());
assertEquals(4, snapshot.getLastChangedLine());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testDisjointScroll" mc="Operation" uid="300a6f28-fbcf-4dc3-aa03-e9a7e5225e7d"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testDisjointScroll]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="6afdbf72-de1c-4056-a7de-87d124622bed"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="000000\n" +
        "111111\n" +
        "222222\n" +
        "333333\n" +
        "444444\n" +
        "555555\n" +
        "666666\n" +
        "777777\n" +
        "888888\n" +
        "999999";
ITerminalTextDataSnapshot snapshot;

snapshot=snapshot(s,term);
term.scroll(0,2,-1);
term.scroll(4,2,-1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "1100110000");
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());

snapshot=snapshot(s,term);
term.scroll(0,3,-1);
term.scroll(2,2,-2);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "1111000000");
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());

snapshot=snapshot(s,term);
term.scroll(0,3,-1);
term.scroll(2,2,-2);
term.scroll(0,3,-1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "1111000000");
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());

snapshot=snapshot(s,term);
term.scroll(0,3,-1);
term.scroll(2,2,-2);
term.scroll(0,3,-10);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "1111000000");
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());

snapshot=snapshot(s,term);
term.scroll(1,3,-1);
term.scroll(1,3,1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "0111000000");
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testResize" mc="Operation" uid="8aceedcc-caab-410e-995d-c33af8e04c18"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testResize]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="c1532381-5292-4273-830a-0ac4236867cc"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="000000\n" +
        "111111\n" +
        "222222\n" +
        "333333";
ITerminalTextDataSnapshot snapshot;

snapshot=snapshot(s,term);
term.setDimensions(term.getHeight(), term.getWidth()+1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "1111");
assertEquals(0, snapshot.getFirstChangedLine());
assertEquals(3, snapshot.getLastChangedLine());
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());

snapshot=snapshot(s,term);
term.setDimensions(term.getHeight()+1, term.getWidth());
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "11111");
assertEquals(0, snapshot.getFirstChangedLine());
assertEquals(4, snapshot.getLastChangedLine());
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());
    
snapshot=snapshot(s,term);
term.setDimensions(term.getHeight()-1, term.getWidth());
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "111");
assertEquals(0, snapshot.getFirstChangedLine());
assertEquals(2, snapshot.getLastChangedLine());
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());
    
snapshot=snapshot(s,term);
term.setDimensions(0, 0);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "");
assertEquals(0, snapshot.getFirstChangedLine());
assertEquals(-1, snapshot.getLastChangedLine());
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testResizeAfterScroll" mc="Operation" uid="5b69fcdd-9246-45df-a203-fb9a04d6031b"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testResizeAfterScroll]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="bd034c2f-7b52-4846-ad8e-7894165e0bcd"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="000000\n" +
        "111111\n" +
        "222222\n" +
        "333333\n" +
        "444444\n" +
        "555555\n" +
        "666666\n" +
        "777777\n" +
        "888888\n" +
        "999999";
ITerminalTextDataSnapshot snapshot;

snapshot=snapshot(s,term);
term.scroll(1,2,-1);
term.setDimensions(5, 4);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "11111");
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());

snapshot=snapshot(s,term);
term.scroll(1,2,-1);
term.setDimensions(7, 2);
term.scroll(4,2,-1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "1111111");
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());
snapshot=snapshot(s,term);

term.scroll(1,2,-1);
term.setDimensions(term.getHeight(),term.getWidth()+1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "1111111111");
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testScrollAfterResize" mc="Operation" uid="442434f4-232e-4745-8c96-dd2cd9db615a"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testScrollAfterResize]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="3907c375-4435-49f4-a0a2-ce12a75920b0"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="000000\n" +
        "111111\n" +
        "222222\n" +
        "333333\n" +
        "444444\n" +
        "555555\n" +
        "666666\n" +
        "777777\n" +
        "888888\n" +
        "999999";
ITerminalTextDataSnapshot snapshot;

snapshot=snapshot(s,term);
term.setDimensions(14, 6);
term.scroll(0,14,-1);
snapshot.updateSnapshot(true);
assertChangedLines(snapshot, "11111111111111");
assertEquals(0, snapshot.getScrollWindowStartLine());
assertEquals(0, snapshot.getScrollWindowSize());
assertEquals(0, snapshot.getScrollWindowShift());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testAddListener" mc="Operation" uid="decbd414-db79-4e0e-b647-333a5908ab6b"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testAddListener]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="ef5ff7a6-5abf-463c-b5a4-1f6e4bc8250b"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
TerminalTextTestHelper.fill(term,s);

ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);

SnapshotListener listener=new SnapshotListener();
snapshot.addListener(listener);
assertEquals(0, listener.N);

// make a change and expect it to be changed
term.setChar(0, 0, '?', null);
assertEquals(1, listener.N);
term.setChar(1, 1, '?', null);
assertEquals(1, listener.N);

snapshot.updateSnapshot(false);
assertEquals(1, listener.N);
listener.reset();

// make a change and expect it to be changed
term.setChars(1, 1, new char[]{'?','!','.'},null);
assertEquals(1, listener.N);
term.setChars(2, 1, new char[]{'?','!','.'},null);
assertEquals(1, listener.N);

snapshot.updateSnapshot(false);
assertEquals(1, listener.N);
listener.reset();

// scroll
term.scroll(1, 2, -1);
assertEquals(1, listener.N);
term.scroll(1, 2, -1);
assertEquals(1, listener.N);

snapshot.updateSnapshot(false);
assertEquals(1, listener.N);
listener.reset();

// scroll
term.scroll(1, 2, 1);
assertEquals(1, listener.N);
term.scroll(1, 2, 1);
assertEquals(1, listener.N);

snapshot.updateSnapshot(false);
assertEquals(1, listener.N);
listener.reset();

// scroll
term.scroll(1, 2, -1);
assertEquals(1, listener.N);
term.scroll(1, 2, -1);
assertEquals(1, listener.N);

snapshot.updateSnapshot(false);
assertEquals(1, listener.N);
listener.reset();

// scroll
term.scroll(1, 2, 1);
assertEquals(1, listener.N);

snapshot.updateSnapshot(false);
assertEquals(1, listener.N);
listener.reset();

// setDimensions
term.setDimensions(2, 2);
assertEquals(1, listener.N);

snapshot.updateSnapshot(false);
assertEquals(1, listener.N);
listener.reset();

// setDimensions
term.setDimensions(20, 20);
assertEquals(1, listener.N);

snapshot.updateSnapshot(false);
assertFalse(snapshot.isOutOfDate());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testRemoveListener" mc="Operation" uid="026cc781-5945-4b40-9596-0ef53b2086ce"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testRemoveListener]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="6961936e-8889-4863-99f7-e38832e4a57e"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
TerminalTextTestHelper.fill(term,s);

ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);

SnapshotListener listener1=new SnapshotListener();
SnapshotListener listener2=new SnapshotListener();
SnapshotListener listener3=new SnapshotListener();
snapshot.addListener(listener1);
snapshot.addListener(listener2);
snapshot.addListener(listener3);
assertEquals(0, listener1.N);

// make a change and expect it to be changed
term.setChar(0, 0, '?', null);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(1, listener3.N);
term.setChar(1, 1, '?', null);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(1, listener3.N);

snapshot.updateSnapshot(false);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(1, listener3.N);
listener1.reset();
listener2.reset();
listener3.reset();

// make a change and expect it to be changed
term.setChars(1, 1, new char[]{'?','!','.'},null);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(1, listener3.N);
term.setChars(2, 1, new char[]{'?','!','.'},null);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(1, listener3.N);


snapshot.updateSnapshot(false);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(1, listener3.N);

listener1.reset();
listener2.reset();
listener3.reset();

snapshot.removeListener(listener2);

// scroll
term.scroll(1, 2, -1);
assertEquals(1, listener1.N);
assertEquals(0, listener2.N);
assertEquals(1, listener3.N);

term.scroll(1, 2, -1);
assertEquals(1, listener1.N);
assertEquals(0, listener2.N);
assertEquals(1, listener3.N);


snapshot.updateSnapshot(false);
assertEquals(1, listener1.N);
assertEquals(0, listener2.N);
assertEquals(1, listener3.N);

snapshot.addListener(listener2);
listener1.reset();
listener2.reset();
listener3.reset();


snapshot.removeListener(listener3);
// scroll
term.scroll(1, 2, 1);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(0, listener3.N);

term.scroll(1, 2, 1);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(0, listener3.N);


snapshot.updateSnapshot(false);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(0, listener3.N);

snapshot.addListener(listener3);
listener1.reset();
listener2.reset();
listener3.reset();

// add listener multiple times
snapshot.addListener(listener3);

// scroll
term.scroll(1, 2, -1);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(2, listener3.N);

term.scroll(1, 2, -1);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(2, listener3.N);


snapshot.updateSnapshot(false);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(2, listener3.N);

listener1.reset();
listener2.reset();
listener3.reset();
// remove the duplicate listener
snapshot.removeListener(listener3);


// scroll
term.scroll(1, 2, 1);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(1, listener3.N);


snapshot.updateSnapshot(false);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(1, listener3.N);

listener1.reset();
listener2.reset();
listener3.reset();


// setDimensions
term.setDimensions(2, 2);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(1, listener3.N);


snapshot.updateSnapshot(false);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(1, listener3.N);

listener1.reset();
listener2.reset();
listener3.reset();


// setDimensions
term.setDimensions(20, 20);
assertEquals(1, listener1.N);
assertEquals(1, listener2.N);
assertEquals(1, listener3.N);


snapshot.updateSnapshot(false);
assertFalse(snapshot.isOutOfDate());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testWindowOfInterest" mc="Operation" uid="72eca09b-3815-410f-a2e6-5930892d76e7"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testWindowOfInterest]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="89451131-8084-41fe-8b5e-6fca539bc601"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
TerminalTextTestHelper.fillSimple(term,"0123456789");
ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);
snapshot.setInterestWindow(7, 4);
snapshot.setInterestWindow(9, 4);
snapshot.updateSnapshot(false);
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testWindowOfInterest2" mc="Operation" uid="ccefde7c-4196-4c9d-950a-c70438f2f175"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testWindowOfInterest2]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="bdf67c52-0e2f-4a1f-a266-2c9beb1f904a"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
TerminalTextTestHelper.fillSimple(term,"0123456789");
ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
snapshot.updateSnapshot(false);
term.scroll(7, 3,-1);
snapshot.setInterestWindow(9, 4);
snapshot.updateSnapshot(false);
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testAddLine" mc="Operation" uid="982e2183-9471-4e39-8f9a-f8a03e29216b"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testAddLine]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="ce44dcac-0084-4c26-86ed-5122c0609378"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
TerminalTextTestHelper.fillSimple(term,"0123456789");
ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
term.setMaxHeight(20);
snapshot.updateSnapshot(false);
assertEquals(10,term.getHeight());
assertEquals(20,term.getMaxHeight());
assertFalse(snapshot.isOutOfDate());
term.addLine();
assertTrue(snapshot.isOutOfDate());
assertEquals(11,term.getHeight());
assertEquals(10,snapshot.getHeight());
snapshot.updateSnapshot(false);
assertEquals(11,term.getHeight());
assertEquals(11,snapshot.getHeight());
assertEquals(20,term.getMaxHeight());

term.addLine();
term.addLine();
assertEquals(11,snapshot.getHeight());
assertEquals(13,term.getHeight());
assertTrue(snapshot.isOutOfDate());
snapshot.updateSnapshot(false);
assertEquals(13,snapshot.getHeight());
assertEquals(13,term.getHeight());
assertEquals(20,term.getMaxHeight());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testHasDimensionsChanged" mc="Operation" uid="72b64471-9c7e-4c71-af23-131253d206eb"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testHasDimensionsChanged]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="cb114e30-d2d1-4647-866c-2d794523963a"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
TerminalTextTestHelper.fillSimple(term,"0123456789");
ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
term.setMaxHeight(20);
snapshot.setInterestWindow(3, 4);
snapshot.updateSnapshot(false);
assertEquals(10,term.getHeight());
assertEquals(20,term.getMaxHeight());
assertFalse(snapshot.isOutOfDate());
term.addLine();
assertTrue(snapshot.isOutOfDate());
assertEquals(11,term.getHeight());
assertEquals(10,snapshot.getHeight());
snapshot.updateSnapshot(false);
assertTrue(snapshot.hasDimensionsChanged());
assertEquals(11,term.getHeight());
assertEquals(11,snapshot.getHeight());
assertEquals(20,term.getMaxHeight());

term.addLine();
term.addLine();
assertEquals(11,snapshot.getHeight());
assertEquals(13,term.getHeight());
assertTrue(snapshot.isOutOfDate());
snapshot.updateSnapshot(false);
assertTrue(snapshot.hasDimensionsChanged());
assertEquals(13,snapshot.getHeight());
assertEquals(13,term.getHeight());
assertEquals(20,term.getMaxHeight());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testCursor" mc="Operation" uid="503997fc-0cff-4b98-9e48-abee3834970c"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testCursor]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="70dc346c-b072-4c48-ad72-cdf22e846cf4"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
TerminalTextTestHelper.fillSimple(term,"0123456789");
ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
term.setMaxHeight(20);
snapshot.setInterestWindow(3, 4);
snapshot.updateSnapshot(false);
term.setCursorLine(2);
term.setCursorColumn(1);
snapshot.updateSnapshot(false);
assertEquals(2, snapshot.getCursorLine());
assertEquals(1, snapshot.getCursorColumn());
term.setCursorLine(3);
term.setCursorColumn(2);
snapshot.updateSnapshot(false);
assertEquals(3, snapshot.getCursorLine());
assertEquals(2, snapshot.getCursorColumn());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testCursor2" mc="Operation" uid="3336caa2-9331-4d5d-9ddd-c7f328df166f"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testCursor2]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="ff48d5d0-b30c-4b33-abdb-aa125ec332b3"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
TerminalTextTestHelper.fillSimple(term,"0123456789");
ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
term.setMaxHeight(20);
snapshot.setInterestWindow(3, 4);
snapshot.updateSnapshot(false);
term.setCursorLine(2);
assertTrue(snapshot.isOutOfDate());
snapshot.updateSnapshot(false);
term.setCursorColumn(1);
assertTrue(snapshot.isOutOfDate());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testHasTerminalChanged" mc="Operation" uid="62bb52a3-629e-421c-8ef6-c5d115e351b1"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testHasTerminalChanged]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="6fc68df5-57c7-446c-91aa-7c7e1194407d"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
String s="12345\n" +
         "abcde\n" +
         "ABCDE\n" +
         "vwxzy\n" +
         "VWXYZ";
TerminalTextTestHelper.fill(term,s);

ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
assertTrue(snapshot.hasTerminalChanged());
snapshot.updateSnapshot(false);

assertTrue(snapshot.hasTerminalChanged());

// make a change and expect it to be changed
term.setChar(0, 0, '?', null);
snapshot.updateSnapshot(false);
assertTrue(snapshot.hasTerminalChanged());

// make a change and expect it to be changed
term.setChars(1, 1, new char[]{'?','!','.'},null);
snapshot.updateSnapshot(false);
assertTrue(snapshot.hasTerminalChanged());

// scroll
term.scroll(1, 2, -1);
snapshot.updateSnapshot(false);
assertTrue(snapshot.hasTerminalChanged());

// scroll
term.scroll(1, 2, 1);
snapshot.updateSnapshot(false);
assertTrue(snapshot.hasTerminalChanged());

// scroll
term.scroll(1, 2, -1);
snapshot.updateSnapshot(true);
assertTrue(snapshot.hasTerminalChanged());

// scroll
term.scroll(1, 2, 1);
snapshot.updateSnapshot(true);
assertTrue(snapshot.hasTerminalChanged());

// setDimensions
term.setDimensions(2, 2);
snapshot.updateSnapshot(false);
assertTrue(snapshot.hasTerminalChanged());

// setDimensions
term.setDimensions(20, 20);
snapshot.updateSnapshot(false);
assertTrue(snapshot.hasTerminalChanged());

snapshot.updateSnapshot(false);
assertFalse(snapshot.hasTerminalChanged());

// window of interest changes should NOT set hasTerminalChanged
snapshot.updateSnapshot(false);
snapshot.setInterestWindow(7, 4);

assertFalse(snapshot.hasTerminalChanged());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="testGetTerminalTextData" mc="Operation" uid="93b32b68-f27e-4ae9-9e2d-9f04155a7bc3"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Concurrency">false</ATT>
            <ATT name="Final">false</ATT>
            <ATT name="Passing">MethodOut</ATT>
            <ATT name="Visibility">Public</ATT>
            <ATT name="IsClass">false</ATT>
            <ATT name="IsAbstract">false</ATT>
            <ATT name="Name"><![CDATA[testGetTerminalTextData]]></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Descriptor">
              <OBJECT>
                <ID name="" mc="Note" uid="89c178fd-49be-43ba-be24-a99ce27ac60f"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Content"><![CDATA[ITerminalTextData term=makeITerminalTextData();
ITerminalTextDataSnapshot snapshot=term.makeSnapshot();
assertSame(term, snapshot.getTerminalTextData());
]]></ATT>
                  <ATT name="Name"></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES>
                  <LINK relation="Model">
                    <FOREIGNID name="JavaCode" mc="NoteType" uid="003800a8-0000-018e-0000-000000000000"/>
                  </LINK>
                </DEPENDENCIES>
              </OBJECT>
            </COMP>
          </DEPENDENCIES>
        </OBJECT>
      </COMP>
      <COMP relation="OwnedImport">
        <OBJECT>
          <ID name="" mc="ElementImport" uid="7c8497b9-a9cc-490b-97ad-98fa6393e772"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Visibility">Private</ATT>
            <ATT name="Name"></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <LINK relation="ImportedElement">
              <ID name="Style" mc="Class" uid="7cdb99e1-1c04-4057-9dc6-e4097a90d2d1"/>
            </LINK>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="" mc="ElementImport" uid="57d59360-616c-4363-bf20-9d1d642b2036"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Visibility">Private</ATT>
            <ATT name="Name"></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <LINK relation="ImportedElement">
              <ID name="StyleColor" mc="Class" uid="7143f483-46a9-4d92-88dd-ec714edb47ed"/>
            </LINK>
          </DEPENDENCIES>
        </OBJECT>
      </COMP>
      <COMP relation="OwnedElement">
        <COMPID name="SnapshotListener" mc="Class" uid="924cb3b7-535e-447f-a83b-5bddd0a38bc8"/>
      </COMP>
      <LINK relation="Extension">
        <FOREIGNID name="JavaClass" mc="Stereotype" uid="01ec23a8-0000-0258-0000-000000000000"/>
      </LINK>
      <COMP relation="Tag">
        <OBJECT>
          <ID name="" mc="TaggedValue" uid="fd3fb65b-3139-452d-b8ca-f4c0df100ec2"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Name"></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Actual">
              <OBJECT>
                <ID name="" mc="TagParameter" uid="03384ff8-2a14-4ae2-aabc-3e5c6d86b764"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Value"><![CDATA[TestCase]]></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES></DEPENDENCIES>
              </OBJECT>
            </COMP>
            <LINK relation="Definition">
              <FOREIGNID name="JavaExtends" mc="TagType" uid="003800a8-0000-0154-0000-000000000000"/>
            </LINK>
          </DEPENDENCIES>
        </OBJECT>
        <OBJECT>
          <ID name="" mc="TaggedValue" uid="6b0b1bcb-7a15-4fe5-9824-7835e918df42"/>
          <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
          <ATTRIBUTES>
            <ATT name="Name"></ATT>
            <ATT name="status">1970354901745664</ATT>
          </ATTRIBUTES>
          <DEPENDENCIES>
            <COMP relation="Actual">
              <OBJECT>
                <ID name="" mc="TagParameter" uid="e21cbdfc-692c-4dea-8159-0fc953efad8c"/>
                <PID name="TerminalTextDataSnapshotTest" mc="Class" uid="f7226982-c75a-4668-b106-b22a5bf87f20"/>
                <ATTRIBUTES>
                  <ATT name="Value"><![CDATA[junit.framework.TestCase]]></ATT>
                  <ATT name="status">1970354901745664</ATT>
                </ATTRIBUTES>
                <DEPENDENCIES></DEPENDENCIES>
              </OBJECT>
            </COMP>
            <LINK relation="Definition">
              <FOREIGNID name="JavaImport" mc="TagType" uid="003800a8-0000-0155-0000-000000000000"/>
            </LINK>
          </DEPENDENCIES>
        </OBJECT>
      </COMP>
    </DEPENDENCIES>
  </OBJECT>
</EXT>